{% extends 'gtpros/menu.html' %}

<!-- Head extra container -->
{% block extra_head %}
{{ block.super }}

<link href="https://cdn.jotfor.ms/static/formCss.css?3.3.11149"
	rel="stylesheet" type="text/css">
<link type="text/css" rel="stylesheet"
	href="https://cdn.jotfor.ms/css/styles/nova.css?3.3.11149">
<style type="text/css">
.form-label-left {
	width: 150px !important;
}

.form-line {
	padding-top: 12px;
	padding-bottom: 12px;
}

.form-label-right {
	width: 150px !important;
}

body, html {
	margin: 0;
	padding: 0;
	background: false;
}

.form-all {
	margin: 0px auto;
	padding-top: 20px;
	width: 650px;
	color: #555 !important;
	font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans",
		Verdana, sans-serif;
	font-size: 14px;
}
</style>

{% endblock %}

<!-- Main container -->
{% block content %}

<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">Informes</h1>
	</div>
	<!-- /.col-lg-12 -->
</div>

{% if not informes %}
	{% if request.session.es_jefe %}
		<div class="row bg-warning">
			Actualmente no hay informes archivados en este proyecto.
		</div>
	{% else %}
		<div class="row bg-warning">
			Actualmente no tienes informes pendientes o rechazados para este proyecto.
		</div>
	{% endif %}
{% endif %}

{% for informe in informes %}
<div class="row project">
	<div class="col-lg-10 col-md-10">
		<div class="panel panel-primary">
			<div class="panel-heading"
				onclick="location.href='{% url 'report_edit' id_proyecto=proyecto.pk id_informe=informe.pk %}'">
			
				<div class="row">
					<div class="col-xs-3">
						<i class="fa fa-book fa-5x"></i>
					</div>
					<div class="col-xs-9 text-right">
						<div class="huge">{{informe.fecha.date}}</div>
						<div>
							{% if informe.aceptado == True %}
								ACEPTADO
							{% elif informe.aceptado == False %}
								RECHAZADO
							{% else %}
								PENDIENTE 
							{% endif %}
						</div>
					</div>
				</div>
			</div>
			<a data-toggle="collapse" href="#{{informe.pk}}">
				<div class="panel-footer">
					<span class="pull-left">Ver Detalles</span> <span
						class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
					<div class="clearfix"></div>
				</div>
			</a>
			<div class="collapse" id="{{proyecto.pk}}">
				<div class="collapse-description">
					<h2>Actividad</h2>
					{{ informe.rol.evento.nombre }}
					<h3>Detalles del informe</h3>
					{{ informe.descripcion }}
				</div>
			</div>
		</div>
	</div>
</div>
{% endfor %}

{% if informeValid %}
<div class="modal fade" id="validateReportmodalForm" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<form method="POST" class="post-form" role="form"
				action="{% url 'validate_report' id_proyecto=proyecto.pk id_informe=informeValid.pk %}">
				{%csrf_token %}
				<!-- Modal Header -->
				<div class="modal-header">
					<h4 class="modal-title" id="myModalLabel">Aceptar/Rechazar informe.</h4>
				</div>
				
				<!-- Modal Body -->
				<div class="modal-body">
					<div class="table-responsive">
					<table class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th>Lunes</th>
								<th>Martes</th>
								<th>Miercoles</th>
								<th>Jueves</th>
								<th>Viernes</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>{{ informeValid.lunes|default:"" }}</td>
								<td>{{ informeValid.martes|default:"" }}</td>
								<td>{{ informeValid.miercoles|default:"" }}</td>
								<td>{{ informeValid.jueves|default:"" }}</td>
								<td>{{ informeValid.viernes|default:"" }}</td>
							</tr>
						</tbody>
					</table>
				</div>
				<!-- /.table-responsive -->
				<div>
					<h4>Incidencias</h4>
					{{ informeValid.descripcion }}
				</div>
				</div>

				<!-- Modal Footer -->
				<div class="modal-footer">
					<button type="submit" class="btn btn-success" name="validacion"
						value="0">Aceptar</button>
					<button type="submit" class="btn btn-danger" name="validacion"
						value="1">Rechazar</button>
				</div>
			</form>
		</div>
	</div>
</div>
{% endif %}

<div class="modal fade" id="reportModalForm" tabindex="-1"
	role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<form method="POST" class="post-form" role="form">
				{%csrf_token %}
				
				<!-- Modal Header -->
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">
						<span aria-hidden="true">&times;</span> <span class="sr-only">Close</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Rellenar informe</h4>
				</div>
				
				<!-- Modal Body -->
				<div class="modal-body">

				{% if form.errors %}
					<div class="text-danger" id="modal-form-error">ERROR!</div>
				{% endif %}

				<div class="form-all">
					<ul class="form-section page-section">
						<li class="form-line" data-type="control_scale" id="id_7"><label
							class="form-label form-label-left form-label-auto" id="label_7"
							for="input_7">Lunes</label>
							<div id="cid_7" class="form-input jf-required">
								<table summary="" cellpadding="4" cellspacing="0"
									class="form-scale-table">
									<tbody>
										<tr>
											<th>&nbsp;</th>
											<th align="center"><label for="input_7_1"> 0 </label></th>
											<th align="center"><label for="input_7_1"> 1 </label></th>
											<th align="center"><label for="input_7_2"> 2 </label></th>
											<th align="center"><label for="input_7_3"> 3 </label></th>
											<th align="center"><label for="input_7_4"> 4 </label></th>
											<th align="center"><label for="input_7_5"> 5 </label></th>
											<th align="center"><label for="input_7_6"> 6 </label></th>
											<th align="center"><label for="input_7_7"> 7 </label></th>
											<th align="center"><label for="input_7_8"> 8 </label></th>
											<th>&nbsp;</th>
										</tr>
										<tr>
											<td><label for="{{ form.lunes.name }}"> </label></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="0" title="0"
												{% if form.lunes.value == 0 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="1" title="1"
												{% if form.lunes.value == 1 %}
													checked
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="2" title="2"
												{% if form.lunes.value == 2 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="3" title="3"
												{% if form.lunes.value == 3 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="4" title="4"
												{% if form.lunes.value == 4 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="5" title="5"
												{% if form.lunes.value == 5 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="6" title="6"
												{% if form.lunes.value == 6 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="7" title="7"
												{% if form.lunes.value == 7 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.lunes.name }}" value="8" title="8"
												{% if form.lunes.value == 8 %}
													checked='checked'
												{% endif %}></td>
											<td><label for="input_7_8"> </label></td>
										</tr>
									</tbody>
								</table>
							</div></li>
						<li class="form-line" data-type="control_scale" id="id_8"><label
							class="form-label form-label-left form-label-auto" id="label_8"
							for="input_8"> Martes </label>
							<div id="cid_8" class="form-input jf-required">
								<table summary="" cellpadding="4" cellspacing="0"
									class="form-scale-table">
									<tbody>
										<tr>
											<th>&nbsp;</th>
											<th align="center"><label for="input_8_1"> 1 </label></th>
											<th align="center"><label for="input_8_2"> 2 </label></th>
											<th align="center"><label for="input_8_3"> 3 </label></th>
											<th align="center"><label for="input_8_4"> 4 </label></th>
											<th align="center"><label for="input_8_5"> 5 </label></th>
											<th align="center"><label for="input_8_6"> 6 </label></th>
											<th align="center"><label for="input_8_7"> 7 </label></th>
											<th align="center"><label for="input_8_8"> 8 </label></th>
											<th>&nbsp;</th>
										</tr>
										<tr>
											<td><label for="{{ form.martes.name }}"> </label></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="0" title="0"
												{% if form.martes.value == 0 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="1" title="1"
												{% if form.martes.value == 1 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="2" title="2"
												{% if form.martes.value == 2 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="3" title="3"
												{% if form.martes.value == 3 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="4" title="4"
												{% if form.martes.value == 4 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="5" title="5"
												{% if form.martes.value == 5 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="6" title="6"
												{% if form.martes.value == 6 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="7" title="7"
												{% if form.martes.value == 7 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.martes.name }}" value="8" title="8"
												{% if form.martes.value == 8 %}
													checked='checked'
												{% endif %}></td>
											<td><label for="input_8_8"> </label></td>
										</tr>
									</tbody>
								</table>
							</div></li>
						<li class="form-line" data-type="control_scale" id="id_9"><label
							class="form-label form-label-left form-label-auto" id="label_9"
							for="input_9"> Miércoles </label>
							<div id="cid_9" class="form-input jf-required">
								<table summary="" cellpadding="4" cellspacing="0"
									class="form-scale-table">
									<tbody>
										<tr>
											<th>&nbsp;</th>
											<th align="center"><label for="input_9_1"> 1 </label></th>
											<th align="center"><label for="input_9_2"> 2 </label></th>
											<th align="center"><label for="input_9_3"> 3 </label></th>
											<th align="center"><label for="input_9_4"> 4 </label></th>
											<th align="center"><label for="input_9_5"> 5 </label></th>
											<th align="center"><label for="input_9_6"> 6 </label></th>
											<th align="center"><label for="input_9_7"> 7 </label></th>
											<th align="center"><label for="input_9_8"> 8 </label></th>
											<th>&nbsp;</th>
										</tr>
										<tr>
											<td><label for="{{ form.miercoles.name }}"> </label></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="0" title="0"
												{% if form.miercoles.value == 0 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="1" title="1"
												{% if form.miercoles.value == 1 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="2" title="2"
												{% if form.miercoles.value == 2 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="3" title="3"
												{% if form.miercoles.value == 3 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="4" title="4"
												{% if form.miercoles.value == 4 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="5" title="5"
												{% if form.miercoles.value == 5 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="6" title="6"
												{% if form.miercoles.value == 6 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="7" title="7"
												{% if form.miercoles.value == 7 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.miercoles.name }}" value="8" title="8"
												{% if form.miercoles.value == 8 %}
													checked='checked'
												{% endif %}></td>
											<td><label for="input_9_8"> </label></td>
										</tr>
									</tbody>
								</table>
							</div></li>
						<li class="form-line" data-type="control_scale" id="id_11">
							<label class="form-label form-label-left form-label-auto"
							id="label_11" for="input_11"> Jueves </label>
							<div id="cid_11" class="form-input jf-required">
								<table summary="" cellpadding="4" cellspacing="0"
									class="form-scale-table">
									<tbody>
										<tr>
											<th>&nbsp;</th>
											<th align="center"><label for="input_11_1"> 1 </label>
											</th>
											<th align="center"><label for="input_11_2"> 2 </label>
											</th>
											<th align="center"><label for="input_11_3"> 3 </label>
											</th>
											<th align="center"><label for="input_11_4"> 4 </label>
											</th>
											<th align="center"><label for="input_11_5"> 5 </label>
											</th>
											<th align="center"><label for="input_11_6"> 6 </label>
											</th>
											<th align="center"><label for="input_11_7"> 7 </label>
											</th>
											<th align="center"><label for="input_11_8"> 8 </label>
											</th>
											<th>&nbsp;</th>
										</tr>
										<tr>
											<td><label for="{{ form.jueves.name }}"> </label></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="0" title="0"
												{% if form.jueves.value == 0 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="1" title="1"
												{% if form.jueves.value == 1 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="2" title="2"
												{% if form.jueves.value == 2 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="3" title="3"
												{% if form.jueves.value == 3 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="4" title="4"
												{% if form.jueves.value == 4 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="5" title="5"
												{% if form.jueves.value == 5 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="6" title="6"
												{% if form.jueves.value == 6 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="7" title="7"
												{% if form.jueves.value == 7 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.jueves.name }}" value="8" title="8"
												{% if form.jueves.value == 8 %}
													checked='checked'
												{% endif %}></td>
											<td><label for="input_11_8"> </label></td>
										</tr>
									</tbody>
								</table>
							</div>
						</li>
						<li class="form-line" data-type="control_scale" id="id_10">
							<label class="form-label form-label-left form-label-auto"
							id="label_10" for="input_10"> Viernes </label>
							<div id="cid_10" class="form-input jf-required">
								<table summary="" cellpadding="4" cellspacing="0"
									class="form-scale-table">
									<tbody>
										<tr>
											<th>&nbsp;</th>
											<th align="center"><label for="input_10_1"> 1 </label>
											</th>
											<th align="center"><label for="input_10_2"> 2 </label>
											</th>
											<th align="center"><label for="input_10_3"> 3 </label>
											</th>
											<th align="center"><label for="input_10_4"> 4 </label>
											</th>
											<th align="center"><label for="input_10_5"> 5 </label>
											</th>
											<th align="center"><label for="input_10_6"> 6 </label>
											</th>
											<th align="center"><label for="input_10_7"> 7 </label>
											</th>
											<th align="center"><label for="input_10_8"> 8 </label>
											</th>
											<th>&nbsp;</th>
										</tr>
										<tr>
											<td><label for="{{ form.viernes.name }}"> </label></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="0" title="0"
												{% if form.viernes.value == 0 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="1" title="1"
												{% if form.viernes.value == 1 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="2" title="2"
												{% if form.viernes.value == 2 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="3" title="3"
												{% if form.viernes.value == 3 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="4" title="4"
												{% if form.viernes.value == 4 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="5" title="5"
												{% if form.viernes.value == 5 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="6" title="6"
												{% if form.viernes.value == 6 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="7" title="7"
												{% if form.viernes.value == 7 %}
													checked='checked'
												{% endif %}></td>
											<td align="center"><input class="form-radio"
												type="radio" name="{{ form.viernes.name }}" value="8" title="8"
												{% if form.viernes.value == 8 %}
													checked='checked'
												{% endif %}></td>
											<td><label for="input_10_8"> </label></td>
										</tr>
									</tbody>
								</table>
							</div>
						</li>
						<li class="form-line" data-type="control_textarea" id="id_12">
							<label class="form-label form-label-left form-label-auto"
							id="label_12" for="input_12"> Incidencias </label>
							<div id="cid_12" class="form-input jf-required">
								<textarea id="input_12" class="form-textarea"
									name="{{ form.descripcion.name }}" cols="40" rows="6">{{ form.descripcion.value }}</textarea>
							</div>
						</li>
					</ul>
				</div>
				
			</div><!-- modal body -->

			<!-- Modal Footer -->
			<div class="modal-footer">
				<button type="submit" class="btn btn-success">
					ENVIAR</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">
					Cancelar</button>
			</div>
			<input type="hidden" name="informe"/>
			<input id="id_rol" name="{{ form.rol.name }}" type="hidden" value="{{ form.rol.value }}">
			</form>
		</div>
	</div>
</div>

{% endblock content %}

{% block extra_js %}
{{ block.super }}

<script type="text/javascript">
	$(function() {
		var form = "{{form|escapejs}}";
		var report = "{{informeValid|escapejs}}";
		
		if (form != 'None') {
			$('#reportModalForm').modal('show');
		}
		
		if (report != 'None' && form == 'None') {
			$('#validateReportmodalForm').modal('show');
		}
	});
</script>

{% endblock %}