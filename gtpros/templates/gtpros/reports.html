{% extends 'gtpros/menu.html' %}

<!-- Main container -->
{% block content %}

<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">Informes</h1>
	</div>
	<!-- /.col-lg-12 -->
</div>

{% if not informes %}
<div class="row bg-warning">
	Actualmente no hay informes archivados en este proyecto.
</div>
{% endif %}

{% for informe in informes %}
<div class="row project">
	<div class="col-lg-10 col-md-10">
		<div class="panel panel-primary">
			{% if request.session.rol == 'JP' %}
				<div class="panel-heading" onclick=openValidateReportModalForm({{ informe.pk }})>
			{% else %}
				<div class="panel-heading">
			{% endif %}
				<div class="row">
					<div class="col-xs-3">
						<i class="fa fa-book fa-5x"></i>
					</div>
					<div class="col-xs-9 text-right">
						<div class="huge">{{informe.fecha.date}}</div>
						<div>
							{% if informe.aceptado == True %}
								ACEPTADO
							{% elif informe.aceptado == False %}
								RECHAZADO
							{% else %}
								PENDIENTE
							{% endif %}
						</div>
					</div>
				</div>
			</div>
			<a data-toggle="collapse" href="#{{informe.pk}}">
				<div class="panel-footer">
					<span class="pull-left">Ver Detalles</span> <span
						class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
					<div class="clearfix"></div>
				</div>
			</a>
			<div class="collapse" id="{{proyecto.pk}}">
				<div class="collapse-description">
					<h2>Actividad</h2>
					{{ informe.evento.nombre }}
					<h3>Detalles del informe</h3>
			    	{{ informe.descripcion }}
		    	</div>
			</div>
		</div>
	</div>
</div>
{% endfor %}

<div class="modal fade" id="modalForm" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<form method="POST" class="post-form" role="form" action="{% url 'validate_report' id_proyecto=proyecto.pk %}">
			{%csrf_token %}
				<!-- Modal Body -->
				<div class="modal-body">
					Aceptar/Rechazar informe.
				</div>
	
				<!-- Modal Footer -->
				<div class="modal-footer">
					<button type="submit" class="btn btn-success" name="validacion" value="0">
						Aceptar</button>
					<button type="submit" class="btn btn-danger" name="validacion" value="1">
						Rechazar</button>
				</div>
				<input type="hidden" name="informe"/>
			</form>
		</div>
	</div>
</div>

{% endblock content %}